# ExamsTutor AI - ConfigMap
# Epic 3.4: Kubernetes Deployment & Security
# Non-sensitive configuration data

apiVersion: v1
kind: ConfigMap
metadata:
  name: examstutor-config
  namespace: examstutor
  labels:
    app: examstutor-api
    component: config
data:
  # Application Configuration
  APP_NAME: "ExamsTutor AI API"
  APP_VERSION: "0.4.0"
  ENVIRONMENT: "production"
  LOG_LEVEL: "INFO"

  # API Configuration
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_WORKERS: "4"
  API_RELOAD: "false"

  # Model Configuration
  MODEL_NAME: "meta-llama/Llama-3-8B-Instruct"
  MODEL_PATH: "/app/models"
  QUANTIZATION_TYPE: "int4"
  DEVICE: "auto"

  # Vector Database
  VECTOR_DB_TYPE: "faiss"
  VECTOR_DB_PATH: "/app/data/vector_store"
  EMBEDDING_MODEL: "sentence-transformers/all-MiniLM-L6-v2"

  # Offline Sync
  SYNC_ENABLED: "true"
  SYNC_INTERVAL_SECONDS: "300"
  SYNC_BATCH_SIZE: "100"
  SYNC_MAX_RETRIES: "3"

  # Monitoring
  PROMETHEUS_ENABLED: "true"
  ENABLE_TRACING: "true"
  JAEGER_ENDPOINT: "http://jaeger-collector.monitoring.svc.cluster.local:14268/api/traces"

  # NDPR Compliance
  DATA_RETENTION_DAYS: "365"
  ENABLE_DATA_ENCRYPTION: "true"
  ENABLE_AUDIT_LOGGING: "true"
  ENABLE_PII_MASKING: "true"

  # CORS
  CORS_ORIGINS: "https://examstutor.ng,https://app.examstutor.ng"
  CORS_ALLOW_CREDENTIALS: "true"
  CORS_ALLOW_METHODS: "GET,POST,PUT,DELETE,OPTIONS"
  CORS_ALLOW_HEADERS: "*"

  # Rate Limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_REQUESTS_PER_MINUTE: "60"

  # File Upload
  MAX_UPLOAD_SIZE_MB: "10"
  ALLOWED_UPLOAD_EXTENSIONS: ".pdf,.docx,.txt"

  # Database URLs (non-sensitive parts)
  DATABASE_POOL_SIZE: "20"
  DATABASE_MAX_OVERFLOW: "10"
  CACHE_TTL: "3600"
