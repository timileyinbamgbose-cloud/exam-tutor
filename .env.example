# ExamsTutor AI API - Environment Configuration
# Epic 3.4: Kubernetes Deployment & Security

# Application
APP_NAME=ExamsTutor AI API
APP_VERSION=0.4.0
ENVIRONMENT=development  # development, staging, production
DEBUG=True
LOG_LEVEL=INFO

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=True

# Database
DATABASE_URL=postgresql+asyncpg://examstutor:password@localhost:5432/examstutor_db
DB_PASSWORD=examstutor123
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# Redis Cache
REDIS_URL=redis://:examstutor123@localhost:6379/0
REDIS_PASSWORD=examstutor123
CACHE_TTL=3600  # seconds

# Security & Authentication
SECRET_KEY=your-secret-key-change-in-production
JWT_SECRET_KEY=your-jwt-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Encryption Keys (Epic 3.4)
PII_ENCRYPTION_KEY=your-pii-encryption-key-here-change-in-production
DATA_ENCRYPTION_KEY=your-encryption-key-change-in-production

# Model Configuration (Epic 3.1)
MODEL_NAME=meta-llama/Llama-3-8B-Instruct
MODEL_PATH=./models/
QUANTIZATION_TYPE=int8  # int8, int4, gguf, awq, gptq
USE_ONNX=False
DEVICE=cuda  # cuda, cpu, mps (for Mac M1/M2)

# Offline RAG Configuration (Epic 3.1)
VECTOR_DB_TYPE=qdrant  # qdrant, chromadb, faiss
VECTOR_DB_PATH=./data/vector_db/
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
VECTOR_DB_COLLECTION=examstutor_curriculum
RAG_TOP_K=5

# Offline Sync Configuration (Epic 3.1)
OFFLINE_MODE=False
SYNC_INTERVAL_SECONDS=300  # 5 minutes
SYNC_BATCH_SIZE=100
ENABLE_BACKGROUND_SYNC=True

# Performance Optimization
MAX_BATCH_SIZE=16
MAX_SEQUENCE_LENGTH=2048
INFERENCE_TIMEOUT_SECONDS=30

# Monitoring (Epic 3.3)
ENABLE_METRICS=True
PROMETHEUS_PORT=9090
ENABLE_TRACING=True
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# NDPR Compliance (Epic 3.4)
ENABLE_AUDIT_LOGS=True
DATA_RETENTION_DAYS=365
ENABLE_DATA_ENCRYPTION=True
ENABLE_PII_MASKING=True

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# Rate Limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# File Upload
MAX_UPLOAD_SIZE_MB=10
ALLOWED_UPLOAD_EXTENSIONS=.pdf,.docx,.txt

# AWS/Cloud (if using cloud infrastructure)
AWS_REGION=eu-west-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_BUCKET_NAME=examstutor-data

# Feature Flags
ENABLE_OFFLINE_MODE=True
ENABLE_QUANTIZATION=True
ENABLE_ONNX_RUNTIME=True
ENABLE_DISTILLATION=False

# ============================================================================
# AI TUTOR SERVICE CONFIGURATION (Epic 1)
# ============================================================================
# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Model Router Configuration
DEFAULT_AI_MODEL=gpt-4o-mini
ENABLE_FINETUNED_MODELS=False
MODEL_SELECTION_PRIORITY=balanced  # speed, quality, cost, balanced

# Context Manager Configuration
MAX_CONTEXT_TOKENS=4000
SESSION_TTL_SECONDS=3600  # 1 hour
CONTEXT_SLIDING_WINDOW=10  # Number of recent messages to keep

# RAG Optimizer Configuration
RAG_SEMANTIC_WEIGHT=0.7
RAG_KEYWORD_WEIGHT=0.3
RAG_ENABLE_RERANKING=True

# AI Response Cache Configuration
CACHE_ENABLED=True
CACHE_TTL_FACTUAL=604800  # 7 days
CACHE_TTL_PRACTICE=86400  # 1 day
CACHE_TTL_CURRICULUM=2592000  # 30 days
CACHE_SIMILARITY_THRESHOLD=0.95

# Response Optimization
SIMPLIFY_LANGUAGE_FOR_JUNIOR=True
ENSURE_EXAMPLES=True
MIN_CLARITY_SCORE=0.6
MIN_COMPREHENSION_SCORE=0.6
